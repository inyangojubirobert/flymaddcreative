// ======================================================
// ðŸš€ TRON USDT PAYMENT SYSTEM - STANDALONE v1.0
// ======================================================

// âœ… Ensure we're in browser














































































































































































console.log('âœ… TRON USDT Payment module loaded (QR only, desktop/mobile supported)');window.TronPaymentsReady = true;// âœ… Ready flagwindow.TronPayments = { showTronPaymentModal, createTronQRContent, TRON_CONFIG };window.showTronPaymentModal = showTronPaymentModal;// âœ… Export to window}    document.getElementById('tron-close').onclick = () => overlay.remove();    // Close modal        };        setTimeout(() => { overlay.remove(); }, 2000);        status.className = 'success';        status.textContent = 'Thank you! Payment will be verified.';        }            return;            status.className = 'error';            status.textContent = 'Invalid transaction hash';        if (txHash && !TRON_UTILS.validateTransactionHash(txHash)) {        const status = document.getElementById('tron-status');        const txHash = document.getElementById('tron-txhash').value.trim();    document.getElementById('tron-confirm').onclick = () => {    // Confirm payment        };        setTimeout(() => { status.textContent = ''; }, 2000);        status.className = ok ? 'success' : 'error';        status.textContent = ok ? 'Address copied!' : 'Copy failed';        const status = document.getElementById('tron-status');        const ok = await TRON_UTILS.copyToClipboard(recipient);    document.getElementById('tron-copy').onclick = async () => {    // Copy address        }        document.getElementById('tron-qr').textContent = 'QR unavailable';    } else {        });            if (err) document.getElementById('tron-qr').textContent = 'QR unavailable';        QRCode.toCanvas(document.getElementById('tron-qr'), qrContent, { width: 180, margin: 2 }, (err) => {    if (typeof QRCode !== 'undefined') {    const qrContent = createTronQRContent(recipient, amount);    // Generate QR        document.body.appendChild(overlay);    `;        </div>            <div id="tron-status"></div>            <button class="close-btn" id="tron-close">Cancel</button>            <button class="btn" id="tron-confirm">âœ… I've Paid</button>            <input class="tx-input" id="tron-txhash" placeholder="Transaction hash (optional)" />            <div style="margin: 1rem 0 0.5rem 0; font-size: 0.95rem; color: #666;">After payment, paste your transaction hash below:</div>            <button class="copy-btn" id="tron-copy">ðŸ“‹ Copy Address</button>            <div>Amount: <b>${amount} USDT</b> (TRC-20)</div>            <div class="qr" id="tron-qr"></div>            <div class="address">${recipient}</div>            <h2>TRON USDT Payment</h2>        <div class="tron-modal">    overlay.innerHTML = `    overlay.id = 'tron-modal-overlay';    overlay.className = 'tron-modal-overlay';    const overlay = document.createElement('div');    // Modal HTML        if (existing) existing.remove();    const existing = document.getElementById('tron-modal-overlay');    // Remove any existing modal        amount = TRON_UTILS.sanitizeAmount(amount);    injectTronStyles();    await loadQRCodeLibrary();async function showTronPaymentModal({ recipient = TRON_CONFIG.RECIPIENT_ADDRESS, amount = TRON_CONFIG.DEFAULT_AMOUNT } = {}) {// âœ… Show TRON Payment Modal}    return `tron://pay?to=${recipient}&amount=${amountSun}&token=${TRON_CONFIG.USDT_ADDRESS}`;    const amountSun = (parseFloat(amount) * 1e6).toString();// âœ… Create TRON QR contentunction createTronQRContent(recipient, amount) {}    document.head.appendChild(style);    `;        .tron-modal .error { color: #e60a0a; margin-top: 0.5rem; }        .tron-modal .success { color: #0f9d58; margin-top: 0.5rem; }        .tron-modal .close-btn:hover { background: #cbd5e1; }        .tron-modal .close-btn { background: #e5e7eb; color: #333; border: none; border-radius: 6px; padding: 0.4rem 1rem; margin-top: 0.7rem; cursor: pointer; font-size: 1rem; }        .tron-modal .tx-input { width: 100%; padding: 0.4rem; border-radius: 5px; border: 1px solid #e5e7eb; margin-bottom: 0.7rem; }        .tron-modal .copy-btn:hover { background: #e5e7eb; }        .tron-modal .copy-btn { background: #f3f4f6; color: #e60a0a; border: none; border-radius: 6px; padding: 0.3rem 0.8rem; margin: 0.5rem 0; cursor: pointer; font-size: 0.95rem; }        .tron-modal .btn:hover { background: #b90c0c; }        .tron-modal .btn { background: #e60a0a; color: #fff; border: none; border-radius: 6px; padding: 0.5rem 1rem; margin: 0.5rem 0; cursor: pointer; font-size: 1rem; transition: background 0.2s; }        .tron-modal .qr { margin: 1rem auto; }        .tron-modal .address { font-family: monospace; background: #f3f4f6; padding: 0.5rem; border-radius: 6px; margin-bottom: 1rem; word-break: break-all; }        .tron-modal h2 { color: #e60a0a; font-size: 1.3rem; margin-bottom: 1rem; }        .tron-modal { background: #fff; border-radius: 20px; padding: 2rem 1.5rem; width: 350px; max-width: 95vw; box-shadow: 0 8px 32px rgba(0,0,0,0.18); text-align: center; }        .tron-modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.85); display: flex; align-items: center; justify-content: center; z-index: 10000; }    style.textContent = `    style.id = 'tron-payment-styles';    const style = document.createElement('style');    if (document.getElementById('tron-payment-styles')) return;function injectTronStyles() {// âœ… Inject minimal styles}    });        document.head.appendChild(script);        script.onerror = resolve;        script.onload = resolve;        script.crossOrigin = 'anonymous';        script.src = 'https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js';        const script = document.createElement('script');    await new Promise((resolve) => {    if (typeof QRCode !== 'undefined') return;async function loadQRCodeLibrary() {// âœ… Load QRCode.js dynamically};    }        return false;        if (/^[a-fA-F0-9]{64}$/.test(txHash)) return txHash;        txHash = txHash.trim();        if (!txHash) return false;    validateTransactionHash: (txHash) => {    },        return isNaN(num) ? TRON_CONFIG.DEFAULT_AMOUNT : num.toFixed(2);        const num = parseFloat(amount);        }            amount = amount.replace(/[^\d.]/g, '');        if (typeof amount === 'string') {    sanitizeAmount: (amount) => {    },        return `${address.substring(0, start)}...${address.substring(address.length - end)}`;        if (!address || address.length < 10) return address;    truncateAddress: (address, start = 6, end = 4) => {    },        }            return false;            console.error('Copy failed:', e);        } catch (e) {            }                return success;                document.body.removeChild(textArea);                const success = document.execCommand('copy');                textArea.select();                textArea.focus();                document.body.appendChild(textArea);                textArea.style.top = '-999999px';                textArea.style.left = '-999999px';                textArea.style.position = 'fixed';                textArea.value = text;                const textArea = document.createElement('textarea');            } else {                return true;                await navigator.clipboard.writeText(text);            if (navigator.clipboard && navigator.clipboard.writeText) {        try {    copyToClipboard: async (text) => {const TRON_UTILS = {// âœ… Utilities};    USDT_DECIMALS: 6    DEFAULT_AMOUNT: 2, // 2 USDT as default    EXPLORER_URL: 'https://tronscan.org/#/transaction/',    RECIPIENT_ADDRESS: 'TVuPgEs4hSLSwPf8NMirVxeYse1vrmEtXL',    USDT_ADDRESS: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',const TRON_CONFIG = {// âœ… Configuration}    throw new Error('TRON Payments requires browser environment');if (typeof window === 'undefined') {