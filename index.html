<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flymadd Creative — Onboarding (dots fixed)</title>

  <!-- Tailwind kept for layout elsewhere; dots themselves use custom CSS only -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* ---------- PAGINATION DOT STYLES (pure CSS, no Tailwind) ---------- */
    #dots {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 8px;
    }

    /* base dot */
    .pager-dot {
      display: inline-block;
      width: 10px;           /* desktop default */
      height: 10px;
      border-radius: 999px;
      background: #d1d5db;   /* slate-300 */
      border: none;
      padding: 0;
      box-sizing: content-box;
      cursor: pointer;
      transition: transform 180ms cubic-bezier(.2,.9,.2,1), background 180ms ease;
      outline: none;
    }

    /* hover/focus */
    .pager-dot:hover,
    .pager-dot:focus {
      background: #9ca3af; /* slate-400 */
      transform: scale(1.05);
    }

    /* active (selected) dot */
    .pager-dot.active {
      background: #2563eb; /* blue-600 */
      transform: scale(1.35);
      box-shadow: 0 6px 18px rgba(37,99,235,0.18);
    }

    /* mobile: make dots smaller and tighter */
    @media (max-width: 640px) {
      .pager-dot { width: 6px; height: 6px; }
      #dots { gap: 6px; }
    }

    /* tablet */
    @media (min-width: 641px) and (max-width: 1024px) {
      .pager-dot { width: 8px; height: 8px; }
      #dots { gap: 7px; }
    }

    /* optionally hide dots on very small screens (uncomment if desired) */
    /* @media (max-width: 360px) { #dots { display: none; } } */

    /* keep existing page visuals unchanged below */
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
  </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-start gap-6 min-h-screen overflow-hidden relative">

  <div class="bg-white rounded-2xl shadow-lg w-11/12 sm:w-5/6 md:w-4/5 max-w-4xl h-full overflow-hidden mx-auto my-6">

    <!-- Preloader -->
    <div id="preloader" class="absolute inset-0 bg-white flex items-center justify-center z-50 transition-opacity duration-500">
      <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500"></div>
    </div>

    <!-- Onboarding -->
    <div id="onboarding" class="relative h-[60vh] overflow-hidden bg-slate-950 rounded-[29px] shadow-xl mt-6 mx-6 sm:mt-8 sm:mx-8 md:mt-10 md:mx-10">
      <div id="slides" class="flex h-full w-full transition-transform duration-1000 ease-in-out will-change-transform">
        <section class="flex-shrink-0 w-full h-full relative">
          <img src="https://res.cloudinary.com/dljcj00ht/image/upload/f_auto,q_auto,w_1600/v1761087274/Brand_cuv2rc.jpg" alt="Slide 1" class="block w-full h-full object-cover opacity-60" />
        </section>
        <section class="flex-shrink-0 w-full h-full relative">
          <img src="https://res.cloudinary.com/dljcj00ht/image/upload/f_auto,q_auto,w_1600/v1761089558/graphics_fei33a.jpg" alt="Slide 2" class="block w-full h-full object-cover opacity-60" />
        </section>
        <section class="flex-shrink-0 w-full h-full relative">
          <img src="https://res.cloudinary.com/dljcj00ht/image/upload/f_auto,q_auto,w_1600/v1761090056/research_yj3wwm.jpg" alt="Slide 3" class="block w-full h-full object-cover opacity-60" />
        </section>
        <section class="flex-shrink-0 w-full h-full relative">
          <img src="https://res.cloudinary.com/dljcj00ht/image/upload/f_auto,q_auto,w_1600/v1761090447/mob_znki5o.jpg" alt="Slide 4" class="block w-full h-full object-cover opacity-60" />
        </section>
      </div>
    </div>

    <!-- Pagination dots (JS will populate) -->
    <div id="dots" aria-hidden="false"></div>

    <!-- Controls (kept for completeness) -->
    <div id="controlsBar" class="flex items-center justify-between gap-4 px-4 mb-4 flex-wrap ml-6 mr-6 sm:ml-8 sm:mr-8 md:ml-10 md:mr-10">
      <div class="flex items-center gap-2">
        <button id="btnBack" aria-label="Back" class="bg-white shadow border px-2 py-2 rounded-full">‹</button>
        <button id="btnSkip" class="text-slate-700 px-3 py-2 rounded">Skip</button>
        <button id="btnNext" class="bg-blue-600 text-white px-4 py-2 rounded-full">Next</button>
        <button id="btnStart" class="hidden bg-blue-600 text-white px-4 py-2 rounded-full">Get Started</button>
      </div>
    </div>

  </div>

<script>
  // Onboarding slider with pure-CSS dots
  class Onboarding {
    constructor(root, slidesEl, dotsEl, backBtn, nextBtn, skipBtn, startBtn) {
      this.root = root;
      this.slidesEl = slidesEl;
      this.dotsEl = dotsEl;
      this.backBtn = backBtn;
      this.nextBtn = nextBtn;
      this.skipBtn = skipBtn;
      this.startBtn = startBtn;
      this.index = 0;
      this.count = slidesEl.children.length;
      this.timer = null;
      this.intervalMs = 8000;
      this.finished = false;

      this.initDots();   // create dots
      this.update();     // position slides / highlight dot
      this.bind();       // attach controls
      this.autoplay();
    }

    initDots() {
      // build dots (no inline sizing here — CSS handles sizes)
      this.dotsEl.innerHTML = '';
      for (let i = 0; i < this.count; i++) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'pager-dot';         // <-- pure-css class
        btn.setAttribute('aria-label', `Go to slide ${i+1}`);
        btn.dataset.index = i;
        btn.addEventListener('click', (e) => {
          const idx = parseInt(e.currentTarget.dataset.index, 10);
          this.index = idx;
          this.update(true);
          this.restartAutoplay();
        });
        this.dotsEl.appendChild(btn);
      }
      // Ensure proper active state after (re)creating
      this.setActiveDot();
    }

    bind() {
      if (this.backBtn) this.backBtn.addEventListener('click', () => this.prev());
      if (this.nextBtn) this.nextBtn.addEventListener('click', () => this.next());
      if (this.skipBtn) this.skipBtn.addEventListener('click', () => this.finish());
      if (this.startBtn) this.startBtn.addEventListener('click', () => this.finish());

      window.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight') this.next();
        if (e.key === 'ArrowLeft') this.prev();
      });

      // When viewport changes, we only need to reposition slides (CSS handles dot sizing)
      window.addEventListener('resize', () => this.update(false));
    }

    prev() {
      if (this.index > 0) { this.index--; this.update(true); this.restartAutoplay(); }
    }

    next() {
      if (this.index < this.count - 1) { this.index++; this.update(true); this.restartAutoplay(); }
      else this.finish();
    }

    nextOrFinish() {
      if (this.index < this.count - 1) this.next();
      else this.finish();
    }

    update(animate = false) {
      const w = this.root.clientWidth || this.root.offsetWidth;
      // Use transform with px to avoid fractional % issues
      this.slidesEl.style.transitionDuration = (animate ? '1200ms' : '0ms');
      this.slidesEl.style.transform = `translateX(-${this.index * w}px)`;
      this.setActiveDot();

      // button UI toggles (optional)
      if (this.backBtn) {
        this.backBtn.disabled = (this.index === 0);
        this.backBtn.style.opacity = this.index === 0 ? '0.45' : '1';
      }
      if (this.nextBtn) {
        const atEnd = this.index === this.count - 1;
        this.nextBtn.style.display = atEnd ? 'none' : '';
      }
      if (this.startBtn) {
        const atEnd = this.index === this.count - 1;
        this.startBtn.style.display = atEnd ? '' : 'none';
      }
    }

    setActiveDot() {
      Array.from(this.dotsEl.children).forEach((dot, i) => {
        if (i === this.index) dot.classList.add('active');
        else dot.classList.remove('active');
      });
    }

    finish() {
      if (this.finished) return;
      this.finished = true;
      this.stopAutoplay();
      this.root.style.display = 'none';
      const main = document.getElementById('mainContent');
      if (main) {
        main.style.display = '';
        setTimeout(() => { window.location.href = 'websiteapp.html'; }, 1000);
      } else {
        window.location.href = 'websiteapp.html';
      }
    }

    autoplay() {
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      this.stopAutoplay();
      this.timer = setInterval(() => this.nextOrFinish(), this.intervalMs);
    }
    stopAutoplay() { if (this.timer) { clearInterval(this.timer); this.timer = null; } }
    restartAutoplay() { this.stopAutoplay(); this.autoplay(); }
  }

  // Initialize on load
  window.addEventListener('load', () => {
    const onboarding = document.getElementById('onboarding');
    const slides = document.getElementById('slides');
    const dots = document.getElementById('dots');
    const btnBack = document.getElementById('btnBack');
    const btnNext = document.getElementById('btnNext');
    const btnSkip = document.getElementById('btnSkip');
    const btnStart = document.getElementById('btnStart');

    // Hide mainContent until finished (preserve original behavior if mainContent exists)
    const mainContent = document.getElementById('mainContent');
    if (mainContent) mainContent.style.display = 'none';

    // remove preloader
    const preloader = document.getElementById('preloader');
    if (preloader) {
      preloader.style.opacity = '0';
      setTimeout(() => { preloader.style.display = 'none'; }, 120);
    }

    // create onboarding instance
    const ob = new Onboarding(onboarding, slides, dots, btnBack, btnNext, btnSkip, btnStart);
    // ensure reposition on resize (keeps slide aligned)
    window.addEventListener('resize', () => ob.update(false));
  });
</script>

</body>
</html>
